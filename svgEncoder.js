
const doc = document;

const initTextarea = doc.querySelector(`#init`);
const resultTextarea = doc.querySelector(`#result`);
const resultCssTextarea = doc.querySelector(`#result-css`);
const resultDemo = doc.querySelector(`#demo`);
const demoWrapper = doc.querySelector(`.demo-wrapper`);
const contrastButtons = doc.querySelectorAll(`.contrast-button`);
let contrastButtonCurrent = null;
let backgroundColor = ``;

const expanders = doc.querySelectorAll(`.expander`);
const expandedClass = `expanded`;
const symbols = /[\r\n%#()<>?[\\\]^`{|}]/g;

const quotesInputs = document.querySelectorAll(`.options__input`);
let externalQuotesValue = document.querySelector(`.options__input:checked`).value;
let quotes = getQuotes();

const buttonExample = document.querySelector(`.button-example`);

// Textarea Actions
// ----------------------------------------

initTextarea.oninput = function () {
  getResults();
};

resultTextarea.oninput = function () {
  const value = resultTextarea.value.trim()
    .replace(/background-image:\s{0,}url\(/, ``)
    .replace(/["']{0,}data:image\/svg\+xml,/, ``)
    .replace(/["']\);{0,}$/, ``);
  initTextarea.value = decodeURIComponent(value);
  getResults();
};

function getResults () {
  if (!initTextarea.value) {
    resultCssTextarea.value = ``;
    resultDemo.setAttribute(`style`, ``);
    return;
  }

  const namespaced = addNameSpace(initTextarea.value);
  const escaped = encodeSVG(namespaced);
  resultTextarea.value = escaped;
  const resultCss = `background-image: url(${quotes.level1}data:image/svg+xml,${escaped}${quotes.level1});`;
  resultCssTextarea.value = resultCss;
  resultDemo.setAttribute(`style`, resultCss);
}

// Tabs Actions
// ----------------------------------------

for (let i = 0; i < expanders.length; i++) {
  const expander = expanders[i];

  expander.onclick = function () {
    const parent = this.parentNode;
    const expanded = parent.querySelector(`.` + expandedClass);
    expanded.classList.toggle(`hidden`);
    this.classList.toggle(`opened`);
  };
}

// Switch quotes
// ----------------------------------------

quotesInputs.forEach(input => {
  input.addEventListener(`input`, function () {
    externalQuotesValue = this.value;
    quotes = getQuotes();
    getResults();
  });
});

// Set example
// ----------------------------------------

buttonExample.addEventListener(`click`, () => {
  initTextarea.value = `<svg viewBox="0 0 1353.098 267.78"><path fill="#00a5af" d="M114.94 152.545c14.039 15.445 28.58 31.795 43.632 49.039 4.611 5.211 8.022 9.32 10.225 12.339 2.202 3.008 4.218 6.666 6.017 10.982 1.809 4.316 2.507 8.475 2.104 12.486-.806 7.02-3.608 12.84-8.426 17.451-6.017 5.82-12.84 8.426-20.459 7.826-2.202-.197-4.257-.6-6.164-1.209-1.907-.6-3.805-1.652-5.712-3.156a150.176 150.176 0 0 1-5.112-4.208c-1.504-1.308-3.412-3.412-5.712-6.322-2.31-2.91-4.11-5.319-5.417-7.216-1.308-1.907-3.461-4.916-6.469-9.025s-5.417-7.472-7.216-10.077c-11.837-15.848-24.569-31.49-38.205-46.936-2.202 22.062-6.921 42.62-14.148 61.673a420.326 420.326 0 0 1-3.156 7.216 48.179 48.179 0 0 1-3.156 5.869 22.465 22.465 0 0 1-4.208 4.965 29.562 29.562 0 0 1-5.112 3.608c-4.621 2.202-9.576 3.107-14.895 2.704-5.319-.403-9.881-2.006-13.695-4.808-4.414-3.412-7.118-8.278-8.121-14.59C.532 234.834.031 223.853.031 208.211c0-35.502.904-66.186 2.704-92.072 1.209-19.86 2.605-33.398 4.208-40.614 1.603-7.216 5.014-12.84 10.235-16.851 8.022-6.42 16.546-8.524 25.572-6.322 8.622 2.006 15.445 8.219 20.459 18.65a32.755 32.755 0 0 1 2.261 6.921c.501 2.409.806 4.513.904 6.322.098 1.809.354 5.515.757 11.129a1223.94 1223.94 0 0 0 2.409 36.406c9.428-20.459 20.666-39.218 33.702-56.266 4.808-6.223 9.173-11.08 13.086-14.59 3.913-3.51 8.573-5.968 13.99-7.374 11.031-3.008 19.761-1.809 26.171 3.608 5.82 5.014 8.327 12.742 7.521 23.173 0 1.406-.206 2.861-.6 4.365-.403 1.504-.747 2.812-1.052 3.913-.305 1.101-.904 2.458-1.809 4.06s-1.603 2.861-2.104 3.756c-.501.904-1.504 2.261-3.008 4.06-1.504 1.809-2.605 3.156-3.313 4.06-.698.904-2.055 2.556-4.06 4.965-2.006 2.409-3.51 4.218-4.513 5.417-9.831 11.837-19.358 24.372-28.58 37.605zm213.628-43.327c3.805 8.022 5.919 19.958 6.322 35.806.403 11.631.403 19.958 0 24.972-2.409 26.476-8.219 46.631-17.451 60.474-7.423 10.834-17.303 19.103-29.642 24.825-12.339 5.712-25.218 7.973-38.657 6.774-16.448-1.209-31.795-7.619-46.031-19.26-7.826-6.017-14.039-13.735-18.66-23.163-7.826-15.642-11.532-36.209-11.129-61.683.197-9.232.452-16.094.747-20.607.305-4.513 1.406-10.431 3.313-17.746 1.907-7.324 4.857-13.489 8.878-18.503 2.605-3.205 6.272-5.722 10.982-7.521 4.709-1.809 9.173-2.409 13.39-1.809 4.621.6 8.426 2.153 11.434 4.66 3.008 2.507 5.211 5.319 6.617 8.426 1.406 3.107 2.458 7.118 3.156 12.034.708 4.916 1.003 9.074.904 12.486-.098 3.412-.246 7.777-.452 13.086-.197 5.309-.295 8.878-.295 10.677 0 9.428 3.205 16.045 9.625 19.86 6.42 3.815 13.636 3.107 21.659-2.104 7.216-4.817 11.837-15.445 13.843-31.893.197-1.406.452-3.657.747-6.774.305-3.107.551-5.417.757-6.921.206-1.504.6-3.559 1.209-6.164.6-2.605 1.258-4.768 1.956-6.469.708-1.701 1.652-3.667 2.861-5.869 1.209-2.202 2.605-4.208 4.218-6.017 5.211-6.017 11.935-8.819 20.155-8.426 8.022.6 14.541 6.223 19.555 16.851zm116.434-9.33c5.014-4.817 11.68-7.619 20.007-8.426 8.327-.796 14.993 1.209 20.007 6.017 5.614 5.82 8.229 12.732 7.826 20.764-2.605 41.518-5.82 72.615-9.635 93.271-3.805 20.056-11.532 34.4-23.163 43.023-5.417 4.208-12.683 7.472-21.816 9.782-9.124 2.31-17.805 3.461-26.024 3.461h-11.129c-24.667-.6-41.518-6.017-50.544-16.251-3.412-4.011-5.515-8.927-6.322-14.737-.796-5.82.403-10.933 3.608-15.347 3.815-4.817 10.53-6.518 20.164-5.112 2.812.403 6.971 1.357 12.486 2.861a971.599 971.599 0 0 0 14.138 3.756c3.913 1.003 8.573 1.76 13.99 2.261 5.417.501 9.527-.147 12.339-1.956 6.617-2.812 7.521-6.115 2.704-9.93-3.608-2.812-7.521-4.218-11.739-4.218-14.639.403-27.174-.501-37.605-2.704-12.84-2.812-21.767-7.924-26.781-15.347-3.608-5.614-5.319-14.236-5.112-25.876.6-18.051 1.504-31.294 2.704-39.719.6-4.414 1.15-7.777 1.652-10.077.501-2.31 1.357-5.112 2.556-8.426 1.199-3.313 2.959-5.968 5.26-7.973 2.31-2.006 5.063-3.706 8.278-5.112 5.417-2.812 11.68-3.107 18.798-.904s11.483 6.322 13.086 12.339c1.003 3.205 1.504 7.02 1.504 11.434s-.157 9.222-.452 14.442c-.305 5.211-.452 9.124-.452 11.739 0 6.214.904 10.628 2.704 13.233 3.205 5.614 9.723 8.524 19.555 8.721 1.603.206 3.205.256 4.817.157a50.068 50.068 0 0 0 4.365-.452c1.308-.206 2.556-.659 3.765-1.357 1.199-.708 2.202-1.76 3.008-3.156 3.008-4.011 4.621-11.837 4.817-23.468 0-1.603-.049-3.716-.147-6.322a381.06 381.06 0 0 0-.305-6.617c-.098-1.809-.049-3.913.147-6.322.206-2.409.501-4.513.904-6.322.403-1.809 1.101-3.706 2.104-5.722a20.912 20.912 0 0 1 3.913-5.417zm588.208 10.736c1.406 3.008 2.91 7.216 4.513 12.633 10.225 36.701 12.633 72.006 7.216 105.905-.6 4.611-1.907 8.573-3.913 11.886-2.006 3.313-4.719 5.968-8.121 7.973-3.412 2.006-7.521 3.008-12.339 3.008-5.417 0-9.831-2.36-13.243-7.069-3.412-4.719-5.112-9.979-5.112-15.799.197 11.434-3.107 19.86-9.93 25.277-6.823 5.417-16.645 9.124-29.485 11.129-14.442 2.202-29.839-.295-46.179-7.521-16.35-7.216-29.141-18.454-38.362-33.702-6.017-9.831-9.979-20.508-11.886-32.041-1.907-11.532-1.357-23.369 1.652-35.502 3.008-12.132 8.622-22.819 16.851-32.041 6.617-7.423 14.639-13.538 24.067-18.355 9.428-4.808 19.103-7.924 29.032-9.32 9.93-1.406 19.712-.305 29.337 3.313 9.635 3.608 17.549 9.733 23.773 18.355-.6-4.011 0-7.924 1.809-11.739 1.809-3.815 4.414-6.823 7.826-9.025s7.216-3.254 11.434-3.156c4.208.098 8.022 1.258 11.434 3.461 3.815 2.605 7.02 6.725 9.635 12.339zm-57.77 70.403c1.003-13.037-2.31-22.77-9.93-29.19a33.002 33.002 0 0 0-2.704-1.809c-1.003-.6-2.861-1.603-5.565-3.008-2.704-1.406-5.319-2.104-7.826-2.104s-5.565.403-9.183 1.209c-6.823 2.605-12.034 9.025-15.642 19.25-3.008 8.829-2.91 17.254.295 25.277 3.815 9.831 9.33 15.947 16.546 18.355 2.006.6 4.011.954 6.017 1.052 2.006.098 3.864-.049 5.565-.452a120.69 120.69 0 0 0 4.66-1.199 17.324 17.324 0 0 0 3.913-1.652c1.199-.708 2.055-1.258 2.556-1.652.501-.403.855-.698 1.052-.904 6.017-4.808 9.428-12.535 10.225-23.163zm182.335-77.924c6.223 3.008 11.985 6.823 17.303 11.434 5.319 4.621 8.671 9.428 10.077 14.442 2.812 9.428 1.701 17.746-3.313 24.972-6.223 9.025-14.344 14.138-24.372 15.347-.6 0-2.507-.098-5.722-.305-20.666-1.406-30.989.501-30.989 5.722l.904 3.608c.403.806 1.003 1.603 1.809 2.409.6.403 1.504 1.101 2.704 2.104 4.011 3.008 7.423 5.869 10.235 8.573 2.812 2.704 5.614 5.869 8.426 9.478 2.812 3.608 4.867 7.167 6.164 10.687 1.308 3.51 1.956 7.472 1.956 11.886s-1.003 8.927-3.008 13.538c-4.817 11.237-12.938 19.152-24.372 23.773-13.233 5.417-27.479 5.309-42.728-.305-9.625-3.608-16.35-7.118-20.155-10.53-3.412-3.008-5.673-6.42-6.774-10.235-1.101-3.805-.855-7.826.747-12.034 3.205-6.214 11.336-8.426 24.372-6.617 1.003.197 2.959.6 5.869 1.199s5.565 1.101 7.973 1.504c2.409.403 4.916.6 7.521.6 2.605 0 4.808-.649 6.617-1.956 1.809-1.308 2.91-3.156 3.313-5.565.403-2.812-1.101-5.919-4.513-9.32-1.209-1.003-2.409-1.858-3.608-2.556-1.209-.708-2.655-1.406-4.365-2.104-1.701-.698-2.959-1.357-3.756-1.956-1.406-.6-2.91-1.357-4.513-2.261a194.496 194.496 0 0 0-4.965-2.704 224.215 224.215 0 0 0-4.365-2.261c-8.622-4.817-15.445-11.581-20.459-20.312-5.014-8.721-7.324-17.903-6.921-27.528.6-11.631 5.319-22.16 14.148-31.589 6.214-6.823 15.239-12.034 27.076-15.642 7.423-2.409 16.045-3.608 25.876-3.608 13.44.206 25.375 2.91 35.806 8.121zm186.248 102.002c4.208 2.605 6.872 7.275 7.973 13.99 1.101 6.725.659 12.181-1.357 16.399-1.406 3.805-3.657 6.823-6.774 9.025-3.107 2.202-8.17 5.014-15.199 8.426-12.84 6.223-27.577 10.028-44.232 11.434-15.445 1.199-27.577.6-36.406-1.809-21.462-5.417-37.507-15.848-48.145-31.294-6.223-8.819-10.185-18.749-11.886-29.789-1.701-11.031-1.504-21.462.6-31.294s5.466-19.053 10.077-27.676c1.003-1.603 2.153-3.461 3.461-5.565s3.805-5.368 7.521-9.773c3.706-4.414 7.669-8.376 11.886-11.886 4.208-3.51 9.733-7.02 16.546-10.53 6.823-3.51 13.941-5.968 21.364-7.374 26.073-5.014 46.238-1.101 60.474 11.739 1.003.806 2.055 1.809 3.156 3.008 1.101 1.209 2.655 3.254 4.66 6.164 2.006 2.91 3.716 5.869 5.112 8.878 1.406 3.008 2.507 6.666 3.313 10.982.806 4.306.904 8.671.305 13.086-1.003 6.823-3.461 13.086-7.374 18.808-3.913 5.712-8.475 10.274-13.685 13.685-9.625 6.017-23.664 8.327-42.118 6.921-2.006 0-4.218-.197-6.617-.6-2.409-.403-4.365-.708-5.869-.904a65.881 65.881 0 0 0-4.365-.452c-1.406-.098-2.458-.098-3.156 0s-1.249.452-1.652 1.052c-.6 1.209.197 3.156 2.409 5.869 2.202 2.704 4.817 4.867 7.826 6.469 10.028 6.017 23.871 7.924 41.518 5.712 2.006-.197 5.112-.806 9.33-1.809a444.723 444.723 0 0 1 11.287-2.556c3.313-.708 6.872-1.003 10.687-.904 3.805.098 6.921.954 9.33 2.556zm-62.283-77.924c-7.02.197-12.683 2.605-16.999 7.216-4.316 4.611-4.365 9.625-.157 15.042.403.6.904 1.209 1.504 1.809 4.414 4.817 10.225 6.42 17.451 4.817 6.223-1.209 10.431-4.267 12.633-9.183s1.907-9.478-.904-13.685c-2.812-4.208-7.324-6.223-13.538-6.017z"/><path fill="#f08519" d="M1165.691 47.26a6.302 6.302 0 0 1-.501 2.999 8.027 8.027 0 0 1-1.721 2.546 7.94 7.94 0 0 1-2.556 1.721c-.963.403-1.927.61-2.881.61a7.121 7.121 0 0 1-2.999-.669 8.703 8.703 0 0 1-2.546-1.77 7.983 7.983 0 0 1-1.721-2.546 7.712 7.712 0 0 1-.61-2.999c0-2.065.757-3.883 2.271-5.437s3.343-2.33 5.486-2.33c2.065.079 3.903.865 5.486 2.389 1.593 1.514 2.35 3.343 2.271 5.486zm29.386-45.461c3.697 0 7.206 1.111 10.539 3.323a14.347 14.347 0 0 1 3.49 2.989 14.57 14.57 0 0 1 2.379 3.992c.669 1.77.629 3.51-.108 5.211-.511 1.18-1.258 1.956-2.222 2.33-.963.374-1.996.334-3.107-.108-.442-.295-.924-.59-1.435-.885a16.298 16.298 0 0 0-1.553-.777c-1.327-1.032-2.733-1.032-4.218 0-1.327.816-2.478 1.76-3.441 2.831-.963 1.072-1.662 2.389-2.104 3.933a25.66 25.66 0 0 0-.718 4.434 35.087 35.087 0 0 0-.049 4.434v.442a27.17 27.17 0 0 0 1.435 3.933 46.593 46.593 0 0 0 1.888 3.716c.147.374.501.57 1.052.61.551.039 1.013-.128 1.386-.501a37.295 37.295 0 0 0 2.33-2.33c.59-.737 1.18-1.406 1.78-1.996.59-.59 1.258-1.219 1.996-1.888.885-.885 1.888-1.367 2.999-1.445 1.111-.079 2.065.275 2.881 1.052.816.777 1.219 1.721 1.219 2.831-.069.59-.147 1.15-.216 1.662a7.937 7.937 0 0 1-.442 1.662 28.087 28.087 0 0 1-1.77 3.048 23.634 23.634 0 0 1-2.222 2.831c-.816 1.327-1.74 2.438-2.772 3.323a11.27 11.27 0 0 1-3.49 2.389 17.383 17.383 0 0 1-4.051 1.17c-2.517.442-4.876.462-7.098.049-2.222-.403-4.228-1.131-6.046-2.163a17.644 17.644 0 0 1-4.768-3.992 20.332 20.332 0 0 1-3.274-5.437 33.685 33.685 0 0 1-1.829-7.039c-.334-2.33-.315-4.749.059-7.265.295-1.701.57-3.402.836-5.103a27.703 27.703 0 0 1 1.278-5.103c1.032-3.471 2.694-6.538 4.985-9.202 3.549-4.729 8.347-7.059 14.413-6.98zm67.641 25.169c0 1.927-.049 3.736-.167 5.437a16.603 16.603 0 0 1-1.052 4.876c-.226.59-.442 1.199-.669 1.829a16.729 16.729 0 0 1-.777 1.829 29.01 29.01 0 0 1-2.389 4.267 102.882 102.882 0 0 0-2.605 4.051 16.303 16.303 0 0 1-1.937 2.222 9.712 9.712 0 0 1-2.389 1.662 26.363 26.363 0 0 1-5.82 2.605 24.014 24.014 0 0 1-6.371 1.052c-4.434.079-8.465-1.219-12.093-3.883a25.58 25.58 0 0 1-2.104-1.888 51.87 51.87 0 0 1-1.996-2.104 12.324 12.324 0 0 1-2.33-3.933 22.922 22.922 0 0 1-1.111-4.493c-.442-4.729-.118-9.281.993-13.636 1.111-4.365 2.89-8.652 5.319-12.86a35.649 35.649 0 0 1 2.664-3.775 12.663 12.663 0 0 1 3.549-2.989c.147-.147.315-.256.501-.334.187-.079.354-.187.501-.334a130.691 130.691 0 0 0 4.051-1.553 24.396 24.396 0 0 1 4.159-1.219 8.636 8.636 0 0 1 3.323-.442c1.111.079 2.222.256 3.323.551a13.58 13.58 0 0 1 2.271.61c.708.256 1.465.57 2.271.944a11.076 11.076 0 0 1 3.933 2.389 16.291 16.291 0 0 1 2.94 3.716 87.427 87.427 0 0 1 1.721 3.933 61.318 61.318 0 0 1 1.504 4.159 16.92 16.92 0 0 1 .669 3.775c.079 1.258.108 2.438.108 3.549zm-8.544 1.77c0-.59.02-1.18.059-1.77.039-.59-.02-1.15-.167-1.662-.59-2.074-1.327-3.844-2.222-5.319-.885-1.475-1.907-2.399-3.048-2.772-1.14-.374-2.369-.108-3.657.777-1.298.885-2.605 2.704-3.933 5.437a34.509 34.509 0 0 0-2.605 7.098c-.629 2.517-.944 4.552-.944 6.105 0 1.032.108 2.055.334 3.048.216 1.003.403 2.015.551 3.048.216.885.698 1.662 1.435 2.33a7.17 7.17 0 0 0 2.556 1.494 5.254 5.254 0 0 0 2.94.167c1.003-.216 1.907-.777 2.713-1.662.374-.442.718-.865 1.052-1.278.334-.403.649-.865.944-1.386.295-.59.61-1.239.944-1.937.334-.698.649-1.426.944-2.163 1.406-3.185 2.104-6.361 2.104-9.537zm17.077 13.636c.079-3.775.187-7.56.334-11.365.147-3.805.295-7.629.442-11.483.079-1.18.147-2.33.216-3.441.079-1.111.187-2.222.334-3.323a86.11 86.11 0 0 1 .501-3.107c.187-1.032.383-2.035.61-2.989.511-1.848 1.406-3.362 2.664-4.552 1.111-1.111 2.645-1.76 4.601-1.937 1.956-.187 3.608.315 4.935 1.494 2.074 1.848 3.441 4.1 4.1 6.764.374.963.629 1.897.777 2.831.147.924.295 1.868.442 2.822.147.295.482.374 1.003.226 2.065-1.475 4.414-2.183 7-2.104 1.553.147 3.107.59 4.66 1.327 1.868 1.111 3.49 2.399 4.896 3.883a33.25 33.25 0 0 1 3.775 4.768c.216.295.403.61.551.944.147.334.334.649.551.944.216.216.442.187.669-.118a97.073 97.073 0 0 0 1.445-2.772c.462-.885.973-1.848 1.573-2.881 1.258-2.143 2.772-3.972 4.542-5.486 1.77-1.514 3.844-2.792 6.233-3.824a18.52 18.52 0 0 1 3.49-.944 8.574 8.574 0 0 1 3.49.167c4.896.885 9.114 2.959 12.683 6.214 1.475 1.327 2.586 2.851 3.323 4.542a21.969 21.969 0 0 1 1.553 5.437c.216 1.927.354 3.785.383 5.604.039 1.809.059 3.677.059 5.604 0 1.553-.108 3.067-.334 4.542a616.23 616.23 0 0 1-.669 4.434 86.873 86.873 0 0 0-.383 3.107 56.128 56.128 0 0 1-.413 3.107 15.218 15.218 0 0 1-1.268 4.326c-.629 1.327-1.612 2.517-2.959 3.549-1.406 1.111-2.92 1.74-4.503 1.888-1.612.147-3.107-.059-4.532-.61-1.406-.551-2.625-1.426-3.677-2.605a8.583 8.583 0 0 1-1.996-4.1 13.285 13.285 0 0 1-.167-3.608c.108-1.14.246-2.31.383-3.49.226-1.475.442-2.959.669-4.434.226-1.475.413-2.959.551-4.434.079-.737.147-1.426.226-2.055.079-.629.108-1.317.108-2.055-.216-4.513-.737-7.816-1.553-9.92s-1.829-3.126-3.048-3.048c-1.219.079-2.527 1.15-3.933 3.215-1.406 2.074-2.812 5.024-4.208 8.878a28.465 28.465 0 0 0-1.111 5.928 160.138 160.138 0 0 1-.56 5.938 46.11 46.11 0 0 0-.334 3.156 23.997 23.997 0 0 1-.442 3.156c-.147 1.258-.669 2.399-1.553 3.441-.374.374-.777.855-1.219 1.445-.885 1.258-1.937 2.163-3.156 2.723-1.219.551-2.458.836-3.716.836a9.369 9.369 0 0 1-3.716-.777c-1.219-.511-2.31-1.298-3.274-2.33a9.537 9.537 0 0 1-1.553-2.271 9.301 9.301 0 0 1-.777-2.389 5.52 5.52 0 0 1-.551-1.937c-.079-.698-.147-1.426-.216-2.163a115.913 115.913 0 0 1-.718-9.645 140.447 140.447 0 0 0-.61-9.31c-.216-1.927-.718-3.441-1.494-4.542-.777-1.111-1.593-1.612-2.438-1.504-.855.118-1.612.924-2.271 2.438-.669 1.514-1.003 3.972-1.003 7.374a499.774 499.774 0 0 0-.334 9.704 414.371 414.371 0 0 1-.334 9.596c0 1.553-.315 2.959-.944 4.218-.629 1.258-1.534 2.438-2.723 3.549-1.553 1.258-3.402 1.897-5.545 1.937-2.143.039-4.031-.58-5.653-1.829-2.586-2.143-3.883-4.66-3.883-7.541a62.09 62.09 0 0 1-.049-4.493c.039-1.514.049-3.048.049-4.601zM734.009 85.75C721.573-.147 665.317-28.924 594.392 33.771c-70.915 62.695-107.566 163.793-78.721 209.391 28.846 45.598 80.687 16.35 89.221-12.27 8.534-28.619 25.906-138.27 50.986-165.149 25.08-26.879 60.061-29.494 78.121 19.997zm-85.642 112.58c-12.348 51.153 42.698 83.735 70.177 63.236 27.479-20.499 47.26-96.398 67.218-125.853 19.958-29.445 38.441-22.573 44.959-8.986 6.518 13.587 10.195 44.468 10.195 44.468s7.639-85.888-42.649-95.375c-50.288-9.487-72.134 55.764-91.295 89.811-19.162 34.046-41.125 50.141-58.596 32.7z"/><path fill="#804930" d="M649.881 74.326s5.319 49.216 3.549 77.59c-1.77 28.374-2.743 33.516-5.063 46.414 3.48 3.451 8.131 5.761 13.39 6.99 14.56 1.593 30.684-13.892 45.205-39.69 8.199-14.58 16.9-34.872 28.108-52.569l.108-.177c-.767-7.954.226-18.444-1.17-27.145-18.06-49.492-53.041-46.877-78.121-19.997-2.065 2.212-4.08 4.994-6.037 8.239l-.088.157.118.177zm142.045 53.356c7.452 13.538 8.367 31.972 11.375 61.634 4.876 48.076 16.192 68.398 35.905 73.431 19.712 5.034 25.267 1.219 25.267 1.219s-14.737 1.258-23.271-97.617c-.118 3.067-.285 4.847-.285 4.847s-1.298-10.883-3.716-22.583l-.079-.374-.079-.374-.039-.167-.039-.206-.079-.374-.079-.344-.01-.029-.079-.374-.088-.374-.029-.147-.049-.236-.079-.374-.069-.315-.01-.059-.088-.374-.088-.374-.029-.118-.059-.265-.088-.374-.069-.285-.02-.088-.088-.374-.088-.374-.02-.079-.079-.285-.088-.374-.069-.256-.029-.118-.088-.374-.098-.374-.01-.059-.079-.315-.098-.364-.059-.226-.039-.138-.098-.364-.098-.364-.01-.029-.088-.334-.098-.364-.049-.187-.049-.167-.098-.354-.098-.354-.098-.354-.098-.354-.049-.157-.059-.197-.098-.344-.098-.315-.01-.029-.108-.344-.108-.344-.039-.128-.069-.216-.108-.334-.088-.285-.01-.049-.108-.334-.108-.324-.029-.098-.079-.226-.108-.324-.088-.246-.029-.079-.118-.315-.118-.315-.029-.069-.088-.236-.118-.305-.079-.216-.039-.088-.472-1.19-.069-.177-.049-.108-.118-.285-.128-.285-.01-.02-.118-.256-.118-.275-.069-.147-.059-.118-.118-.265-.128-.256-.285-.57-.029-.069-.265-.492-.069-.128-.236-.423-.029-.059-.167-.285a18.02 18.02 0 0 0-.59-.924l-.069-.108-.147-.216-.246-.354-.039-.049-.256-.344-.118-.157-.069-.088-.364-.452-.029-.039-.393-.472-.02-.02-.393-.442-.069-.079-.118-.118-.344-.354-.02-.02-.315-.315-.059-.049-.324-.295-.069-.069-.226-.206-.088-.079-.305-.265-.118-.098-.177-.138-.079-.069-.403-.305-.423-.315-.069-.049-.492-.334-.01-.01-.511-.324-.049-.029-.482-.275-.413-.226-.177-.088-.364-.177-.226-.108-.383-.167-.147-.069-.452-.177-.177-.069-.383-.138-.226-.079-.393-.128-.029-.01-.531-.157-.059-.01-.6-.147a16.6 16.6 0 0 0-3.805-.403h-.029c-3.952.029-8.327 1.396-12.968 4.581l-.079.049-.708.501-.069.049c-1.77 1.288-3.588 2.851-5.427 4.69l-.177.177-.688.708-.098.098-.718.767-.138.147-.718.796-.029.039z"/></svg>`;
  getResults();
});

// Demo Background Switch
// ----------------------------------------

function contrastButtonsSetCurrent (button) {
  const classCurrent = `contrast-button--current`;

  if (contrastButtonCurrent) {
    contrastButtonCurrent.classList.remove(classCurrent);
  }

  backgroundColor = button.dataset.color;
  contrastButtonCurrent = button;
  button.classList.add(classCurrent);
}

contrastButtons.forEach(button => {
  if (!backgroundColor) {
    contrastButtonsSetCurrent(button);
  }

  button.addEventListener(`click`, function () {
    contrastButtonsSetCurrent(this);
    demoWrapper.style.background = backgroundColor;
  });
});

// Namespace
// ----------------------------------------

function addNameSpace (data) {
  if (data.indexOf(`http://www.w3.org/2000/svg`) < 0) {
    data = data.replace(/<svg/g, `<svg xmlns=${quotes.level2}http://www.w3.org/2000/svg${quotes.level2}`);
  }

  return data;
}

// Encoding
// ----------------------------------------

function encodeSVG (data) {
  // Use single quotes instead of double to avoid encoding.
  if (externalQuotesValue === `double`) {
    data = data.replace(/"/g, `'`);
  } else {
    data = data.replace(/'/g, `"`);
  }

  data = data.replace(/>\s{1,}</g, `><`);
  data = data.replace(/\s{2,}/g, ` `);

  // Using encodeURIComponent() as replacement function
  // allows to keep result code readable
  return data.replace(symbols, encodeURIComponent);
}

// Get quotes for levels
// ----------------------------------------

function getQuotes () {
  const double = `"`;
  const single = `'`;

  return {
    level1: externalQuotesValue === `double` ? double : single,
    level2: externalQuotesValue === `double` ? single : double
  };
}

// Copy to clipboard
// ----------------------------------------

const copyResultButton = document.getElementById(`copy-result-button`);
const copyCSSResultButton = document.getElementById(`copy-css-result-button`);

copyResultButton.addEventListener(`click`, function (event) {
  const textToCopy = document.getElementById(`result`);
  textToCopy.select();
  document.execCommand(`copy`),toastNotif('<i class="clipboard"></i>Copied to clipboard');
});

copyCSSResultButton.addEventListener(`click`, function (event) {
  const textToCopy = document.getElementById(`result-css`);
  textToCopy.select();
  document.execCommand(`copy`),toastNotif('<i class="clipboard"></i>Copied to clipboard');
});

// Common
// ----------------------------------------

// eslint-disable-next-line no-unused-vars
function out (data) {
  console.log(data);
}
